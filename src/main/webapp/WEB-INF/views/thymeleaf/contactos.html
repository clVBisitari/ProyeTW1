<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>AssistPyme - Contactos</title>
    <!-- custom style -->
    <link rel="stylesheet" th:href="@{/css/main.css}"/>
    <link rel="stylesheet" th:href="@{/css/contactos.css}"/>
</head>
<body class="body">
<nav class="nav">
    <div>
        <a class="nav__link" th:href="@{/dashboard} ">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav__icon" viewBox="0 0 16 16">
                <title>Inicio</title>
                <path
                        d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"
                />
            </svg>
        </a>
    </div>
    <div>
        <a class="nav__link" th:href="@{/contactos}">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav__icon" viewBox="0 0 16 16">
                <title>Contactos</title>
                <path
                        d="M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5M.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5"
                />
                <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm8-9a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
            </svg>
        </a>
    </div>
    <div>
        <a class="nav__link" th:href="@{/inversiones}">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav__icon" viewBox="0 0 16 16">
                <title>Inversiones</title>
                <path
                        d="M6.5 1A1.5 1.5 0 0 0 5 2.5V3H1.5A1.5 1.5 0 0 0 0 4.5v8A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-8A1.5 1.5 0 0 0 14.5 3H11v-.5A1.5 1.5 0 0 0 9.5 1zm0 1h3a.5.5 0 0 1 .5.5V3H6v-.5a.5.5 0 0 1 .5-.5m1.886 6.914L15 7.151V12.5a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5V7.15l6.614 1.764a1.5 1.5 0 0 0 .772 0M1.5 4h13a.5.5 0 0 1 .5.5v1.616L8.129 7.948a.5.5 0 0 1-.258 0L1 6.116V4.5a.5.5 0 0 1 .5-.5"
                />
            </svg>
        </a>
    </div>
    <div>
        <a class="nav__link" th:href="@{/dashboardGastos}">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav__icon" viewBox="0 0 16 16">
                <title>Gastos</title>

                <path
                        d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27m.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0z"
                />
                <path
                        d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5m8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5"
                />
            </svg>
        </a>
    </div>
    <div>
        <a class="nav__link" th:href="@{/cerrarSesion}">
            <svg xmlns="http://www.w3.org/2000/svg" class="nav__icon" viewBox="0 0 16 16">
                <title>Salir</title>
                <path
                        fill-rule="evenodd"
                        d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z"
                />
                <path
                        fill-rule="evenodd"
                        d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z"
                />
            </svg>
        </a>
    </div>
</nav>
<main class="contacts__main">
    <header class="contacts__search">

        <form class="contacts__form" th:action="@{/buscar/contacto}" method="post">
            <input class="contacts__input" type="text" placeholder="Buscar contacto" name="nombre"/>
            <svg class="contacts__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                <path
                        d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"
                />
            </svg>
        </form>


        <section>
            <aside th:if="${mensajeContactoNoEncontrado}">
                <h1>
                    No se encontro ningun contacto con ese nombre
                </h1>

            </aside>

            <aside class="contacts__aside" th:if="${contactoEncontrado != null} ">
                <h3 class="contacts__atitle">Contacto encontrado!!!!</h3>
                <article class="contacts__article">
                    <img class="contacts__img" th:src="@{img/perfil.jpg}" alt="foto de perfil-contacto"/>
                    <p class="contacts__text" th:text="${contactoEncontrado.nombre}">Usuario</p>


                    <form th:if="${mensajeContactoNuevo!=null}"
                          th:action="@{/agregar/contacto/{nombre}(nombre=${contactoEncontrado.nombre})}"
                          method="post">
                        <button type="submit">Agregar Usuario</button>
                    </form>

                    <form th:if="${usuarioActual.esAdmin && mensajeContactoEnLista!=null && !contactoEncontrado.enSuspencion}"
                          th:action="@{/suspender/usuario/{nombre}(nombre=${contactoEncontrado.nombre})}" method="post">
                        <textarea name="motivo" placeholder="Escriba el motivo de la suspensión"></textarea>
                        <button type="submit">Suspender Usuario</button>
                    </form>
                    <p class="error" th:text="${mensaje}"></p>
                    <form th:if="${usuarioActual.esAdmin && mensajeContactoEnLista!=null && contactoEncontrado.enSuspencion}"
                          th:action="@{/revertir-suspencion/usuario/{nombre}(nombre=${contactoEncontrado.nombre})}"
                          method="post">

                        <button type="submit">revertir suspencion</button>
                    </form>

                </article>
            </aside>

        </section>
    </header>

    <section class="contacts__section">
        <h2 class="contacts__title" th:if="${contactos != null} ">Mis contactos</h2>

        <div th:each="usuario : ${contactos}">

            <article class="contacts__article">
                <img class="contacts__img" th:src="@{img/perfil.jpg}" alt="foto de perfil-contacto"/>
                <p class="contacts__text" th:text="${usuario.nombre}">Usuario</p>

                <!-- Formulario para Suspender Usuario -->
                <div th:if="${usuarioActual.esAdmin && !usuario.enSuspencion}">
                    <form th:action="@{/suspender/usuario/{nombre}(nombre=${usuario.nombre})}" method="post">
                        <textarea name="motivo" placeholder="Escriba el motivo de la suspensión"></textarea>
                        <button type="submit">Suspender Usuario</button>
                    </form>
                </div>

                <!-- Formulario para DesSuspender Usuario -->
                <div th:if="${usuarioActual.esAdmin && usuario.enSuspencion}">
                    <!-- Mensaje de error o estado -->
                    <p class="error" th:text="${mensaje}"></p>
                    <form th:action="@{/revertir-suspencion/usuario/{nombre}(nombre=${usuario.nombre})}" method="post">
                        <button type="submit">revertir suspencion</button>
                    </form>
                </div>
            </article>

        </div>

        <div th:else="${contactos == null}">
            <p th:text="${noHayContactos}">No hay contactos en tu lista.</p>
        </div>

    </section>
    <aside class="contacts__aside">
        <h3 class="contacts__atitle" th:if="${contactosSugeridos != null} ">Sugeridos</h3>
        <div th:each="contactoDeContacto : ${contactosSugeridos}">
            <article class="contacts__article">
                <img class="contacts__img" th:src="@{img/perfil.jpg}" alt="foto de perfil-contacto"/>
                <p class="contacts__text" th:text="${contactoDeContacto.nombre}">Usuario</p>
                <form th:action="@{/agregar/contacto/{nombre}(nombre=${contactoDeContacto.nombre})}" method="post">
                    <button type="submit">Agregar Usuario</button>
                </form>
            </article>
        </div>
    </aside>
</main>
</body>
</html>
