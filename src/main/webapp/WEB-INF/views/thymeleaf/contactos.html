<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>AssistPyme - Contactos</title>
    <!-- custom style -->
    <link rel="stylesheet" th:href="@{/css/main.css}"/>
    <link rel="stylesheet" th:href="@{/css/contactos.css}"/>
</head>
<body class="body">
<nav class="nav">
    <div>
        <a class="nav__link" th:href="@{/dashboard}">
            <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="nav__icon"
                    viewBox="0 0 16 16"
            >
                <title>Inicio</title>
                <path
                        d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"
                />
            </svg>
        </a>
    </div>
    <div>
        <a class="nav__link" th:href="@{/contactos}">
            <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="nav__icon"
                    viewBox="0 0 16 16"
            >
                <title>Contactos</title>
                <path
                        d="M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5M.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5"
                />
                <path
                        d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm8-9a3 3 0 1 1-6 0 3 3 0 0 1 6 0"
                />
            </svg>
        </a>
    </div>
    <div>
        <a class="nav__link" th:href="@{/inversiones}">
            <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="nav__icon"
                    viewBox="0 0 16 16"
            >
                <title>Inversiones</title>
                <path
                        d="M6.5 1A1.5 1.5 0 0 0 5 2.5V3H1.5A1.5 1.5 0 0 0 0 4.5v8A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-8A1.5 1.5 0 0 0 14.5 3H11v-.5A1.5 1.5 0 0 0 9.5 1zm0 1h3a.5.5 0 0 1 .5.5V3H6v-.5a.5.5 0 0 1 .5-.5m1.886 6.914L15 7.151V12.5a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5V7.15l6.614 1.764a1.5 1.5 0 0 0 .772 0M1.5 4h13a.5.5 0 0 1 .5.5v1.616L8.129 7.948a.5.5 0 0 1-.258 0L1 6.116V4.5a.5.5 0 0 1 .5-.5"
                />
            </svg>
        </a>
    </div>
    <div>
        <a class="nav__link" th:href="@{/dashboardGastos}">
            <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="nav__icon"
                    viewBox="0 0 16 16"
            >
                <title>Gastos</title>

                <path
                        d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27m.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0z"
                />
                <path
                        d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5m8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5"
                />
            </svg>
        </a>
    </div>
    <div>
        <a class="nav__link" th:href="@{/cerrarSesion}">
            <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="nav__icon"
                    viewBox="0 0 16 16"
            >
                <title>Salir</title>
                <path
                        fill-rule="evenodd"
                        d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z"
                />
                <path
                        fill-rule="evenodd"
                        d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z"
                />
            </svg>
        </a>
    </div>
</nav>
<main class="contacts__main">
    <header class="contacts__search">
        <form
                class="contacts__form"
                th:action="@{/buscar/contacto}"
                method="post"
        >
            <input
                    class="contacts__input"
                    type="text"
                    placeholder="Buscar contacto"
                    name="nombre"
            />
            <svg
                    class="contacts__icon"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 16 16"
            >
                <path
                        d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"
                />
            </svg>
        </form>
    </header>
    <aside
            class="contacts__aside"
            th:if="${contactosEncontrados != null}"
    >
        <h3 class="contacts__atitle">Contactos encontrados</h3>
        <article
                class="contacts__article"
                th:each="contactoEncontrado : ${contactosEncontrados}"
        >
            <img
                    class="contacts__img"
                    th:src="@{img/perfil.jpg}"
                    alt="foto de perfil-contacto"
            />
            <p
                    class="contacts__text"
                    th:text="${contactoEncontrado.nombre}"
            >
                Usuario
            </p>

            <div th:if="${usuarioActual != null}">
                <div th:if="${usuarioActual.esAdmin}">
                    <!-- Verificar si el usuario actual es admin -->
                    <div
                            th:if="${contactoEncontrado?.enSuspension == false}"
                    >
                        <form
                                th:action="@{/suspender/usuario/{id}(id=${contactoEncontrado.id})}"
                                method="post"
                        >
                                    <textarea
                                            name="motivo"
                                            id="contactoEcontrado"
                                            cols="30"
                                            rows="10"
                                            placeholder="motivo de suspension"
                                    ></textarea>
                            <button class="contacts__button" type="submit">
                                Suspender
                            </button>
                        </form>
                    </div>
                    <div
                            th:if="${contactoEncontrado?.enSuspension == true}"
                    >
                        <form
                                th:action="@{/revertir-suspension/usuario/{id}(id=${contactoEncontrado.id})}"
                                method="post"
                        >
                            <button class="contacts__button" type="submit">
                                <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="contacts__svg"
                                        viewBox="0 0 16 16"
                                >
                                    <title>Revertir</title>
                                    <path
                                            d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.354-5.854 1.5 1.5a.5.5 0 0 1-.708.708L13 11.707V14.5a.5.5 0 0 1-1 0v-2.793l-.646.647a.5.5 0 0 1-.708-.708l1.5-1.5a.5.5 0 0 1 .708 0M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"
                                    />
                                    <path
                                            d="M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
                                    />
                                </svg>
                            </button>
                            <p
                                    class="error"
                                    th:if="${contactoEncontrado.enSuspension}"
                                    th:text="${mensaje}"
                            ></p>
                        </form>
                    </div>
                    <div
                            th:if="${contactoEncontrado != null && mensajeContactoEnLista == null}"
                    >
                        <form
                                th:action="@{/agregar/contacto/{id}(id=${contactoEncontrado.id})}"
                                method="post"
                        >
                            <button class="contacts__button" type="submit">
                                <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="contacts__svg"
                                        viewBox="0 0 16 16"
                                >
                                    <title>Agregar</title>
                                    <path
                                            d="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m.256 7a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
                                    />
                                    <path
                                            d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m-3.5-2a.5.5 0 0 0-.5.5v1.5a.5.5 0 0 0 1 0V11a.5.5 0 0 0-.5-.5m0 4a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"
                                    />
                                </svg>
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div th:if="${usuarioActual != null}">
                <div th:if="${!usuarioActual.esAdmin}">
                    <!-- Verificar si el usuario actual es admin -->
                    <div
                            th:if="${contactoEncontrado != null && mensajeContactoEnLista != null}"
                    >
                        <form
                                th:action="@{/agregar/contacto/{id}(id=${contactoEncontrado.id})}"
                                method="post"
                        >
                            <button class="contacts__button" type="submit">
                                <svg
                                        xmlns="http://www.w3.org/2000/svg"
                                        class="contacts__svg"
                                        viewBox="0 0 16 16"
                                >
                                    <title>Suspender</title>
                                    <path
                                            d="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m.256 7a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
                                    />
                                    <path
                                            d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m-3.5-2a.5.5 0 0 0-.5.5v1.5a.5.5 0 0 0 1 0V11a.5.5 0 0 0-.5-.5m0 4a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"
                                    />
                                </svg>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </article>
    </aside>

    <aside th:if="${mensajeContactoNoEncontrado}">
        <h1>No se encontró ningún contacto con ese nombre</h1>
    </aside>

    <section>
        <aside th:if="${contactos != null}">
            <h3 class="contacts__atitle">Contactos</h3>
            <div th:each="contacto : ${contactos}">
                <article class="contacts__article">
                    <img
                            class="contacts__img"
                            th:src="@{img/perfil.jpg}"
                            alt="foto de perfil-contacto"
                    />
                    <p
                            class="contacts__text"
                            th:text="${contacto.nombre}"
                    >
                        Usuario
                    </p>
                </article>

                <div
                        th:if="${usuarioActual.esAdmin && !contacto.enSuspension}"
                >
                    <form
                            th:action="@{/suspender/usuario/{id}(id=${contacto.id})}"
                            method="post"
                    >
                                <textarea
                                        name="motivo"
                                        id=""
                                        cols="30"
                                        rows="10"
                                        placeholder="motivo de suspension"
                                ></textarea>
                        <button class="contacts__button" type="submit">
                            <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="contacts__svg"
                                    viewBox="0 0 16 16"
                            >
                                <title>Suspender</title>
                                <path
                                        d="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m.256 7a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
                                />
                                <path
                                        d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m-3.5-2a.5.5 0 0 0-.5.5v1.5a.5.5 0 0 0 1 0V11a.5.5 0 0 0-.5-.5m0 4a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"
                                />
                            </svg>
                        </button>
                    </form>
                </div>
                <div
                        th:if="${usuarioActual.esAdmin && contacto.enSuspension}"
                >
                    <form
                            th:action="@{/revertir-suspension/usuario/{id}(id=${contacto.id})}"
                            method="post"
                    >
                        <button class="contacts__button" type="submit">
                            <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="contacts__svg"
                                    viewBox="0 0 16 16"
                            >
                                <title>Revertir</title>
                                <path
                                        d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.354-5.854 1.5 1.5a.5.5 0 0 1-.708.708L13 11.707V14.5a.5.5 0 0 1-1 0v-2.793l-.646.647a.5.5 0 0 1-.708-.708l1.5-1.5a.5.5 0 0 1 .708 0M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"
                                />
                                <path
                                        d="M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
                                />
                            </svg>
                        </button>
                        <p
                                class="error"
                                th:if="${contacto.enSuspension}"
                                th:text="${mensaje}"
                        ></p>
                    </form>
                </div>
            </div>
        </aside>

        <aside
                class="contacts__aside"
                th:if="${contactosSugeridos != null}"
        >
            <h3 class="contacts__atitle">Contactos Sugeridos</h3>
            <div th:each="contactoSugerido : ${contactosSugeridos}">
                <article class="contacts__article">
                    <img
                            class="contacts__img"
                            th:src="@{img/perfil.jpg}"
                            alt="foto de perfil-contacto"
                    />
                    <p
                            class="contacts__text"
                            th:text="${contactoSugerido.nombre}"
                    >
                        Usuario
                    </p>
                    <form
                            th:action="@{/agregar/contacto/{id}(id=${contactoSugerido.id})}"
                            method="post"
                    >
                        <button class="contacts__button" type="submit">
                            <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="contacts__svg"
                                    viewBox="0 0 16 16"
                            >
                                <title>Agregar</title>
                                <path
                                        d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m1.679-4.493-1.335 2.226a.75.75 0 0 1-1.174.144l-.774-.773a.5.5 0 0 1 .708-.708l.547.548 1.17-1.951a.5.5 0 1 1 .858.514M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"
                                />
                                <path
                                        d="M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
                                />
                            </svg>
                        </button>
                    </form>
                </article>

                <div
                        th:if="${usuarioActual.esAdmin && !contactoSugerido.enSuspension}"
                >
                    <form
                            th:action="@{/suspender/usuario/{id}(id=${contactoSugerido.id})}"
                            method="post"
                    >
                                <textarea
                                        name="motivo"
                                        cols="30"
                                        rows="10"
                                        placeholder="motivo de suspension"
                                ></textarea>
                        <button class="contacts__button" type="submit">
                            <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="contacts__svg"
                                    viewBox="0 0 16 16"
                            >
                                <title>Suspender</title>
                                <path
                                        d="M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4m.256 7a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
                                />
                                <path
                                        d="M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m-3.5-2a.5.5 0 0 0-.5.5v1.5a.5.5 0 0 0 1 0V11a.5.5 0 0 0-.5-.5m0 4a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"
                                />
                            </svg>
                        </button>
                    </form>
                </div>
                <div
                        th:if="${usuarioActual.esAdmin && contactoSugerido.enSuspension}"
                >
                    <form
                            th:action="@{/revertir-suspension/usuario/{id}(id=${contactoSugerido.id})}"
                            method="post"
                    >
                        <button class="contacts__button" type="submit">
                            <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="contacts__svg"
                                    viewBox="0 0 16 16"
                            >
                                <title>Revertir</title>
                                <path
                                        d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7m.354-5.854 1.5 1.5a.5.5 0 0 1-.708.708L13 11.707V14.5a.5.5 0 0 1-1 0v-2.793l-.646.647a.5.5 0 0 1-.708-.708l1.5-1.5a.5.5 0 0 1 .708 0M11 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0M8 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4"
                                />
                                <path
                                        d="M8.256 14a4.5 4.5 0 0 1-.229-1.004H3c.001-.246.154-.986.832-1.664C4.484 10.68 5.711 10 8 10q.39 0 .74.025c.226-.341.496-.65.804-.918Q8.844 9.002 8 9c-5 0-6 3-6 4s1 1 1 1z"
                                />
                            </svg>
                        </button>
                        <p
                                class="error"
                                th:if="${contactoSugerido.enSuspension}"
                                th:text="${mensaje}"
                        ></p>
                    </form>
                </div>
            </div>
        </aside>
    </section>
</main>
</body>
</html>
